(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},15:function(e,t,a){e.exports=a(35)},22:function(e,t,a){},29:function(e,t,a){},31:function(e,t,a){},33:function(e,t,a){},35:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),s=a(12),i=a.n(s),r=(a(20),a(1)),c=a(2),o=a(4),m=a(3),u=a(5),d=a(13),h=a.n(d),p=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).navbarSwitch=function(){a.setState({navbarIsActive:!a.state.navbarIsActive})},a.state={username:null,navbarIsActive:!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){this.setState({username:function(){var e=document.cookie;if(e.length>0){var t=e.indexOf("username=");if(-1!==t){var a=e.indexOf(";",t+"username".length+1);return-1===a?e.substring(t+"username".length+1):e.substring(t+"username".length+1,a)}}}()})}},{key:"render",value:function(){return l.a.createElement("nav",{className:"navbar is-dark",role:"navigation","aria-label":"main navigation"},l.a.createElement("div",{className:"navbar-brand"},l.a.createElement("div",{className:"navbar-item"},l.a.createElement("img",{src:h.a,alt:"React",width:"64",height:"64"})),l.a.createElement("div",{className:"navbar-item"},"\u7ba1\u7406\u540e\u53f0"),l.a.createElement("div",{onClick:this.navbarSwitch,role:"button",className:this.state.navbarIsActive?"navbar-burger burger is-active":"navbar-burger burger","aria-label":"menu","aria-expanded":"false"},l.a.createElement("span",{"aria-hidden":"true"}),l.a.createElement("span",{"aria-hidden":"true"}),l.a.createElement("span",{"aria-hidden":"true"}))),l.a.createElement("div",{id:"navbarBasicExample",className:this.state.navbarIsActive?"navbar-menu is-active":"navbar-menu"},l.a.createElement("div",{className:"navbar-end"},l.a.createElement("div",{className:"navbar-item has-dropdown is-hoverable"},l.a.createElement("div",{className:"navbar-link"},this.state.username),l.a.createElement("div",{className:"navbar-dropdown is-right"},l.a.createElement("div",{className:"navbar-item"},l.a.createElement("a",{href:"http://application.test:5000/logout",className:"button is-danger"},"\u9000\u51fa")))))))}}]),t}(n.Component),v=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"renderMenuItem",value:function(e,t){var a=this;return l.a.createElement("a",{className:e===this.props.value?"is-active":"",onClick:function(){return a.props.onClick(e)}},t)}},{key:"render",value:function(){return l.a.createElement("aside",{className:"menu is-light"},l.a.createElement("p",{className:"menu-label"},"\u95e8\u5e97\u7ba1\u7406"),l.a.createElement("ul",{className:"menu-list"},l.a.createElement("li",null,this.renderMenuItem("items","\u5546\u54c1\u5217\u8868")),l.a.createElement("li",null,this.renderMenuItem("orders","\u8ba2\u5355\u5217\u8868")),l.a.createElement("li",null,this.renderMenuItem("users","\u7528\u6237\u5217\u8868"))))}}]),t}(n.Component),g=a(14),b=a.n(g),E=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=document.getElementById("lineChart");new b.a(e,{type:"line",data:{labels:["Sun","Mon","Tues","Wed","Thur","Fri","Sat"],datasets:[{label:"# of Sales Volume",data:[12,19,3,0,2,3,16],backgroundColor:"rgba(255, 159, 64, 0.2)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1,lineTension:0,pointBackgroundColor:"rgba(153, 102, 255, 0.2)",pointBorderColor:"rgba(75, 192, 192, 0.2)",PointBorderWidth:1}]}})}},{key:"render",value:function(){return l.a.createElement("canvas",{id:"lineChart"})}}]),t}(n.Component),f=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"container is-widescreen"},l.a.createElement("div",{className:"tile is-ancestor"},l.a.createElement(E,null)))}}]),t}(n.Component),N=(a(22),function e(t,a){var n=this,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"http://localhost";return Object(r.a)(this,e),this.request=new XMLHttpRequest,this.response=null,this.request.onreadystatechange=function(){n.request.readyState===XMLHttpRequest.DONE&&(200===n.request.status?n.response=JSON.parse(n.request.response):n.response=n.request.status)},this.request.open(t,s+a,!1),this.request.setRequestHeader("Content-Type","application/json"),l?this.request.send(JSON.stringify(l)):this.request.send(),this.response}),y=a(7),k=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={isActive:!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"switchCatalogs",value:function(){this.setState({isActive:!this.state.isActive})}},{key:"selectCatalog",value:function(e,t){this.setState({isActive:!1}),this.props.onClick(e,t)}},{key:"renderCatalogList",value:function(){var e=this;return this.props.catalogs.map(function(t){return l.a.createElement("a",{className:e.props.activeCatalog===t.name?"dropdown-item is-active":"dropdown-item",onClick:function(){return e.selectCatalog(t.id,t.name)},key:t.id},t.name)})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:this.state.isActive?"dropdown is-active":"dropdown"},l.a.createElement("div",{className:"dropdown-trigger",onClick:function(){return e.switchCatalogs()}},l.a.createElement("button",{className:"button","aria-haspopup":"true","aria-controls":"dropdown-menu"},l.a.createElement("span",null,this.props.activeCatalog),l.a.createElement("span",{className:"icon is-small"},l.a.createElement(y.a,{icon:"angle-down"})))),l.a.createElement("div",{className:"dropdown-menu",id:"dropdown-menu",role:"menu"},l.a.createElement("div",{className:"dropdown-content"},this.renderCatalogList())))}}]),t}(n.Component),O=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return this.props.items.map(function(a){var n=a.id,s=a.name,i=a.image,r=a.description,c=a.price,o=a.sold;return console.log(n),l.a.createElement("tr",{key:n},l.a.createElement("th",null,s),l.a.createElement("td",null,l.a.createElement("img",{src:i,alt:s})),l.a.createElement("td",null,r),l.a.createElement("td",null,"\uffe5",c),l.a.createElement("td",null,o),l.a.createElement("td",null,l.a.createElement("button",{className:"button is-info",onClick:function(){return e.props.modifyItem(a)}},"\u4fee\u6539"),l.a.createElement("button",{className:"button is-danger",onClick:function(){return t.deleteItem(n)}},"\u5220\u9664")))})}}],[{key:"deleteItem",value:function(e){console.log(e),new N("DELETE","/item/"+e)}}]),t}(n.Component),C=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("table",{className:"table is-hoverable is-bordered"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{className:"item-name"},"\u540d\u79f0"),l.a.createElement("th",{className:"item-image"},"\u56fe\u7247"),l.a.createElement("th",{className:"item-description"},"\u4ecb\u7ecd"),l.a.createElement("th",{className:"item-price"},"\u4ef7\u683c"),l.a.createElement("th",{className:"item-sold"},"\u5df2\u552e"),l.a.createElement("th",{className:"item-option"},"\u64cd\u4f5c"))),l.a.createElement("tbody",null,l.a.createElement(O,{items:this.props.items||[],modifyItem:function(t){return e.props.modifyItem(t)}})))}}]),t}(n.Component),j=(a(29),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={catalog:""},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"handleCatalogChange",value:function(e){this.setState({catalog:e.target.value})}},{key:"storeCatalog",value:function(){var e={name:this.state.catalog};new N("POST","/catalog",e),this.props.getCatalogs(),this.props.onClick()}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"box alert-box"},l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"\u6dfb\u52a0\u5206\u7c7b"),l.a.createElement("div",{className:"control"},l.a.createElement("input",{type:"text",className:"input",value:this.state.catalog,onChange:this.handleCatalogChange.bind(this),placeholder:"\u8bf7\u8f93\u5165\u5206\u7c7b\u540d\u79f0"}))),l.a.createElement("div",{className:"field is-grouped is-grouped-centered"},l.a.createElement("button",{className:"button is-primary",onClick:function(){return e.storeCatalog()}},"\u63d0\u4ea4"),l.a.createElement("button",{className:"button is-light",onClick:function(){return e.props.onClick()}},"\u53d6\u6d88")))}}]),t}(n.Component)),I=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={catalogs:[{id:0,name:"\u5168\u90e8"}],catalogSwitchIsActive:!1,activeCatalog:{id:0,name:"\u5168\u90e8"},activeCatalogAlert:!1,items:[]},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"getCatalogs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=new N("GET",e?"/catalog/"+e:"/catalog");this.setState({catalogs:[{id:0,name:"\u5168\u90e8"}].concat(t)})}},{key:"getItems",value:function(e){var t=new N("GET",0===e?"/item":"/item/"+e);this.setState({items:t})}},{key:"switchCatalogs",value:function(){this.setState({catalogSwitchIsActive:!this.state.catalogSwitchIsActive})}},{key:"selectCatalog",value:function(e,t){this.getItems(e),this.setState({catalogSwitchIsActive:!1,activeCatalog:{id:e,name:t}})}},{key:"deleteCatalogAndItems",value:function(){var e=this.state.activeCatalog.id;new N("DELETE","/catalog/"+e),this.getCatalogs()}},{key:"openCatalogAlert",value:function(){this.setState({activeCatalogAlert:!0})}},{key:"closeCatalogAlert",value:function(){this.setState({activeCatalogAlert:!1})}},{key:"componentWillMount",value:function(){this.getCatalogs(),this.getItems(0)}},{key:"renderCatalogAlert",value:function(){var e=this;return this.state.activeCatalogAlert?l.a.createElement(j,{getCatalogs:function(){return e.getCatalogs()},onClick:function(){return e.closeCatalogAlert()}}):null}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"container is-widescreen"},l.a.createElement("h2",{className:"title is-2"},"\u5546\u54c1\u5217\u8868"),l.a.createElement("nav",{className:"level"},l.a.createElement("div",{className:"level-left"},l.a.createElement("div",{className:"level-item"},l.a.createElement(k,{catalogs:this.state.catalogs,activeCatalog:this.state.activeCatalog.name,onClick:function(t,a){return e.selectCatalog(t,a)}})),l.a.createElement("div",{className:"level-item"},l.a.createElement("button",{className:"button is-primary",onClick:function(){return e.openCatalogAlert()}},"\u6dfb\u52a0\u5206\u7c7b")),l.a.createElement("div",{className:"level-item"},l.a.createElement("button",{className:"button is-danger",onClick:function(){return e.deleteCatalogAndItems()}},"\u5220\u9664\u5206\u7c7b\u53ca\u5206\u7c7b\u5185\u7269\u54c1")),l.a.createElement("div",{className:"level-item"},l.a.createElement("button",{className:"button is-primary",onClick:function(){return e.props.selectMenuItem("addItem")}},"\u6dfb\u52a0\u5546\u54c1")))),l.a.createElement(C,{items:this.state.items,modifyItem:function(t){return e.props.modifyItem(t)}}),this.renderCatalogAlert())}}]),t}(n.Component);a(31);function w(e){return e.catalogs.map(function(e){var t=e.id,a=e.name;return l.a.createElement("option",{value:t,key:t},a)})}var S=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={isModify:!1,catalogs:[{id:"",name:"\u8bf7\u9009\u62e9\u5206\u7c7b"}],imageDataUrl:"",nameLength:0,descriptionLength:0,itemId:"",name:"",image:null,price:0,description:"",catalogId:""},a.image=l.a.createRef(),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"changeImage",value:function(){var e=this,t=this.image.current.files[0];console.log(typeof t);var a=new FileReader;a.onload=function(a){e.setState({imageDataUrl:a.target.result,image:t})},a.readAsDataURL(t)}},{key:"changeName",value:function(e){var t=e.target.value.substr(0,16);this.setState({name:t,nameLength:t.length})}},{key:"changePrice",value:function(e){this.setState({price:Math.floor(100*Math.abs(e.target.value))/100})}},{key:"changeDescription",value:function(e){var t=e.target.value.substr(0,200);this.setState({description:t,descriptionLength:t.length})}},{key:"changeCatalog",value:function(e){console.log(e.target.value),this.setState({catalogId:e.target.value})}},{key:"submitForm",value:function(e){e.preventDefault();var t=this.state.itemId,a=this.state.name,n=this.state.image,l=this.state.price,s=this.state.description,i=this.state.catalogId;console.log("name: "+a),""!==a&&null!==a||alert("\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a"),console.log(n),console.log("price: "+l),""!==l&&null!==l||alert("\u4ef7\u683c\u4e0d\u80fd\u4e3a\u7a7a"),console.log("catalogId: "+i),""!==i&&null!==i||alert("\u5206\u7c7b\u4e0d\u80fd\u4e3a\u7a7a");var r=new FormData;null!==n&&""!==n&&r.append("image",n),r.append("name",a),r.append("price",l),r.append("description",s),r.append("catalog_id",i);var c=new XMLHttpRequest;c.onreadystatechange=function(){c.readyState===XMLHttpRequest.DONE&&(200===c.status?JSON.parse(c.response):c.status)},this.state.isModify?c.open("PUT","http://localhost/item/"+t):c.open("POST","http://localhost/item"),c.send(r),this.props.selectMenuItem("items")}},{key:"componentWillMount",value:function(){if(console.log(this.props.item),null!==this.props.item&&""!==this.props.item){var e=this.props.item;this.setState({isModify:!0,itemId:e.id,name:e.name,imageDataUrl:e.image,price:e.price,description:e.description,catalogId:e.catalog.id})}var t=new N("GET","/catalog");this.setState({catalogs:[{id:"",name:"\u8bf7\u9009\u62e9\u5206\u7c7b"}].concat(t)})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"container is-widescreen"},l.a.createElement("h2",{className:"title is-2"},"\u6dfb\u52a0\u5546\u54c1"),l.a.createElement("form",{onSubmit:this.submitForm.bind(this)},l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"\u56fe\u7247"),l.a.createElement("div",{className:"control upload-control"},l.a.createElement(y.a,{className:"upload-icon",icon:"cloud-upload-alt"}),l.a.createElement("img",{className:this.state.imageDataUrl?"upload-image":"upload-image upload-invisible",src:this.state.imageDataUrl,alt:"\u4e0a\u4f20\u56fe\u7247"}),l.a.createElement("input",{type:"file",accept:"image/*",title:"\u4e0a\u4f20\u56fe\u7247",className:"upload-input upload-invisible",ref:this.image,onChange:function(){return e.changeImage()}}))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"\u540d\u79f0"),l.a.createElement("div",{className:"control has-icons-right"},l.a.createElement("input",{type:"text",name:"name",className:"input",value:this.state.name||"",onChange:this.changeName.bind(this)}),l.a.createElement("span",{className:"icon",style:{right:"4px"}},this.state.nameLength,"/16"))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"\u4ef7\u683c"),l.a.createElement("div",{className:"control"},l.a.createElement("input",{type:"number",name:"price",className:"input",value:this.state.price||"",onChange:this.changePrice.bind(this)}))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"\u63cf\u8ff0"),l.a.createElement("div",{className:"control has-icons-right"},l.a.createElement("textarea",{className:"textarea has-fixed-size",value:this.state.description||"",onChange:this.changeDescription.bind(this)}),l.a.createElement("span",{className:"icon",style:{top:"initial",right:"8px",bottom:0}},this.state.descriptionLength,"/200"))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"\u5206\u7c7b"),l.a.createElement("div",{className:"control"},l.a.createElement("div",{className:"select"},l.a.createElement("select",{value:this.state.catalogId,onChange:this.changeCatalog.bind(this)},l.a.createElement(w,{catalogs:this.state.catalogs}))))),l.a.createElement("div",{className:"field"},l.a.createElement("div",{className:"control"},l.a.createElement("input",{className:"button is-primary",type:"submit",value:this.state.isModify?"\u4fee\u6539":"\u6dfb\u52a0"})))))}}]),t}(n.Component),M=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return this.props.orders.map(function(a){console.log(a);var n,s=a.id,i=a.number,r=a.price,c=a.address,o=a.created_at,m=JSON.parse(a.items);switch(m=m.map(function(e){return l.a.createElement("p",null,e.name," * ",e.count,"\u4efd")}),c.gender){case 1:n="\u5148\u751f";break;case 2:n="\u5973\u58eb";break;default:n="\u4fdd\u5bc6"}return l.a.createElement("tr",{key:s},l.a.createElement("th",null,i),l.a.createElement("th",null,m),l.a.createElement("th",null,"\uffe5",r),l.a.createElement("th",null,l.a.createElement("p",null,c.name," ",n),l.a.createElement("p",null,"\u624b\u673a\u53f7: ",c.mobile),l.a.createElement("p",null,c.address)),l.a.createElement("th",null,o),l.a.createElement("td",null,l.a.createElement("button",{className:"button is-info",onClick:function(){return e.props.modifyOrder(a)}},"\u4fee\u6539"),l.a.createElement("button",{className:"button is-danger",onClick:function(){return t.deleteOrder(s)}},"\u5220\u9664")))})}}],[{key:"deleteOrder",value:function(e){console.log(e),new N("DELETE","/order/"+e)}}]),t}(n.Component),x=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("table",{className:"table is-hoverable is-bordered"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"\u8ba2\u5355\u7f16\u53f7"),l.a.createElement("th",null,"\u5546\u54c1"),l.a.createElement("th",null,"\u603b\u4ef7"),l.a.createElement("th",null,"\u5730\u5740"),l.a.createElement("th",null,"\u65f6\u95f4"),l.a.createElement("th",{className:"order-option"},"\u64cd\u4f5c"))),l.a.createElement("tbody",null,l.a.createElement(M,{orders:this.props.orders||[],modifyOrder:function(t){return e.props.modifyOrder(t)}})))}}]),t}(n.Component),A=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={orders:[]},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=new N("GET","/order");console.log(e),this.setState({orders:e})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"container is-widescreen"},l.a.createElement("h2",{className:"title is-2"},"\u8ba2\u5355\u5217\u8868"),l.a.createElement(x,{orders:this.state.orders,modifyOrder:function(t){return e.props.modifyOrder(t)}}))}}]),t}(n.Component),D=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.props.users.map(function(e){var t,a=e.id,n=e.avatar,s=e.nickname,i=e.country,r=e.province,c=e.city;switch(e.gender){case 1:t=l.a.createElement(y.a,{icon:"mars"});break;case 2:t=l.a.createElement(y.a,{icon:"venus"});break;default:t=l.a.createElement(y.a,{icon:"question"})}return l.a.createElement("tr",{key:a},l.a.createElement("th",null,l.a.createElement("img",{src:n,alt:s})),l.a.createElement("th",null,s),l.a.createElement("th",null,t),l.a.createElement("th",null,i),l.a.createElement("th",null,r),l.a.createElement("th",null,c))})}}]),t}(n.Component),L=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return l.a.createElement("table",{className:"table is-hoverable is-bordered"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"\u5934\u50cf"),l.a.createElement("th",null,"\u6635\u79f0"),l.a.createElement("th",null,"\u6027\u522b"),l.a.createElement("th",null,"\u56fd\u7c4d"),l.a.createElement("th",null,"\u7701\u4efd"),l.a.createElement("th",null,"\u5e02/\u53bf"))),l.a.createElement("tbody",null,l.a.createElement(D,{users:this.props.users||[]})))}}]),t}(n.Component),T=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={users:[]},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=new N("GET","/user");console.log(e),this.setState({users:e})}},{key:"render",value:function(){return l.a.createElement("div",{className:"container is-widescreen"},l.a.createElement("h2",{className:"title is-2"},"\u7528\u6237\u5217\u8868"),l.a.createElement(L,{users:this.state.users}))}}]),t}(n.Component);a(33);function q(e){return e.catalogs.map(function(e){var t=e.id,a=e.name;return l.a.createElement("option",{value:t,key:t},a)})}var R=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={isModify:!1,catalogs:[{id:"",name:"\u8bf7\u9009\u62e9\u5206\u7c7b"}],imageDataUrl:"",nameLength:0,descriptionLength:0,itemId:"",name:"",image:null,price:0,description:"",catalogId:""},a.image=l.a.createRef(),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"changeImage",value:function(){var e=this,t=this.image.current.files[0];console.log(typeof t);var a=new FileReader;a.onload=function(a){e.setState({imageDataUrl:a.target.result,image:t})},a.readAsDataURL(t)}},{key:"changeName",value:function(e){var t=e.target.value.substr(0,16);this.setState({name:t,nameLength:t.length})}},{key:"changePrice",value:function(e){this.setState({price:Math.floor(100*Math.abs(e.target.value))/100})}},{key:"changeDescription",value:function(e){var t=e.target.value.substr(0,200);this.setState({description:t,descriptionLength:t.length})}},{key:"changeCatalog",value:function(e){console.log(e.target.value),this.setState({catalogId:e.target.value})}},{key:"submitForm",value:function(e){e.preventDefault();var t=this.state.itemId,a=this.state.name,n=this.state.image,l=this.state.price,s=this.state.description,i=this.state.catalogId;console.log("name: "+a),""!==a&&null!==a||alert("\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a"),console.log(n),console.log("price: "+l),""!==l&&null!==l||alert("\u4ef7\u683c\u4e0d\u80fd\u4e3a\u7a7a"),console.log("catalogId: "+i),""!==i&&null!==i||alert("\u5206\u7c7b\u4e0d\u80fd\u4e3a\u7a7a");var r=new FormData;null!==n&&""!==n&&r.append("image",n),r.append("name",a),r.append("price",l),r.append("description",s),r.append("catalog_id",i);var c=new XMLHttpRequest;c.onreadystatechange=function(){c.readyState===XMLHttpRequest.DONE&&(200===c.status?JSON.parse(c.response):c.status)},this.state.isModify?c.open("PUT","http://localhost:5000/item/"+t):c.open("POST","http://localhost:5000/item"),c.send(r),this.props.selectMenuItem("items")}},{key:"componentWillMount",value:function(){if(console.log(this.props.item),null!==this.props.item&&""!==this.props.item){var e=this.props.item;this.setState({isModify:!0,itemId:e.id,name:e.name,imageDataUrl:e.image,price:e.price,description:e.description,catalogId:e.catalog.id})}var t=new N("GET","/catalog");this.setState({catalogs:[{id:"",name:"\u8bf7\u9009\u62e9\u5206\u7c7b"}].concat(t)})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"container is-widescreen"},l.a.createElement("h2",{className:"title is-2"},"\u6dfb\u52a0\u5546\u54c1"),l.a.createElement("form",{onSubmit:this.submitForm.bind(this)},l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"\u56fe\u7247"),l.a.createElement("div",{className:"control upload-control"},l.a.createElement(y.a,{className:"upload-icon",icon:"cloud-upload-alt"}),l.a.createElement("img",{className:this.state.imageDataUrl?"upload-image":"upload-image upload-invisible",src:this.state.imageDataUrl,alt:"\u4e0a\u4f20\u56fe\u7247"}),l.a.createElement("input",{type:"file",accept:"image/*",title:"\u4e0a\u4f20\u56fe\u7247",className:"upload-input upload-invisible",ref:this.image,onChange:function(){return e.changeImage()}}))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"\u540d\u79f0"),l.a.createElement("div",{className:"control has-icons-right"},l.a.createElement("input",{type:"text",name:"name",className:"input",value:this.state.name||"",onChange:this.changeName.bind(this)}),l.a.createElement("span",{className:"icon",style:{right:"4px"}},this.state.nameLength,"/16"))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"\u4ef7\u683c"),l.a.createElement("div",{className:"control"},l.a.createElement("input",{type:"number",name:"price",className:"input",value:this.state.price||"",onChange:this.changePrice.bind(this)}))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"\u63cf\u8ff0"),l.a.createElement("div",{className:"control has-icons-right"},l.a.createElement("textarea",{className:"textarea has-fixed-size",value:this.state.description||"",onChange:this.changeDescription.bind(this)}),l.a.createElement("span",{className:"icon",style:{top:"initial",right:"8px",bottom:0}},this.state.descriptionLength,"/200"))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"\u5206\u7c7b"),l.a.createElement("div",{className:"control"},l.a.createElement("div",{className:"select"},l.a.createElement("select",{value:this.state.catalogId,onChange:this.changeCatalog.bind(this)},l.a.createElement(q,{catalogs:this.state.catalogs}))))),l.a.createElement("div",{className:"field"},l.a.createElement("div",{className:"control"},l.a.createElement("input",{className:"button is-primary",type:"submit",value:this.state.isModify?"\u4fee\u6539":"\u6dfb\u52a0"})))))}}]),t}(n.Component),U=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={activeMenuItem:"orders",item:null,order:null},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"selectMenuItem",value:function(e){this.state.item?this.setState({activeMenuItem:e,item:null}):this.setState({activeMenuItem:e})}},{key:"modifyItem",value:function(e){this.setState({item:e,activeMenuItem:"addItem"})}},{key:"modifyOrder",value:function(e){this.setState({order:e,activeMenuItem:"addOrder"})}},{key:"renderPage",value:function(){var e,t=this;switch(this.state.activeMenuItem){case"home":e=l.a.createElement(f,null);break;case"items":e=l.a.createElement(I,{selectMenuItem:function(e){return t.selectMenuItem(e)},modifyItem:function(e){return t.modifyItem(e)}});break;case"addItem":e=l.a.createElement(S,{selectMenuItem:function(e){return t.selectMenuItem(e)},item:this.state.item});break;case"orders":e=l.a.createElement(A,{selectMenuOrder:function(e){return t.selectMenuOrder(e)},modifyOrder:function(e){return t.modifyOrder(e)}});break;case"addOrder":e=l.a.createElement(R,{selectMenuOrder:function(e){return t.selectMenuOrder(e)},order:this.state.order});break;case"users":e=l.a.createElement(T,null);break;default:e=l.a.createElement(A,null)}return e}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(p,null),l.a.createElement("div",{className:"columns"},l.a.createElement("div",{className:"column is-one-fifth"},l.a.createElement("section",{className:"section"},l.a.createElement(v,{value:this.state.activeMenuItem,onClick:function(t){return e.selectMenuItem(t)}}))),l.a.createElement("div",{className:"column is-four-fifths"},l.a.createElement("section",{className:"section"},this.renderPage()))))}}]),t}(n.Component),P=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return l.a.createElement("section",{className:"hero is-fullheight"},l.a.createElement("div",{className:"hero-body"},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"columns is-desktop is-centered"},l.a.createElement("div",{className:"column is-one-third-desktop"},l.a.createElement("form",{className:"box",method:"POST",action:"http://localhost/login"},l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"\u8d26\u53f7"),l.a.createElement("div",{className:"control has-icons-left has-icons-right"},l.a.createElement("input",{className:"input is-success",name:"username",type:"text",placeholder:"\u8bf7\u8f93\u5165\u8d26\u53f7"}),l.a.createElement("span",{className:"icon is-small is-left"},l.a.createElement(y.a,{icon:"user"})),l.a.createElement("span",{className:"icon is-small is-right"},l.a.createElement(y.a,{icon:"check"}))),l.a.createElement("p",{className:"help is-success"},"This username is available")),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"\u5bc6\u7801"),l.a.createElement("div",{className:"control has-icons-left has-icons-right"},l.a.createElement("input",{className:"input is-danger",name:"password",type:"password",placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"}),l.a.createElement("span",{className:"icon is-small is-left"},l.a.createElement(y.a,{icon:"unlock"})),l.a.createElement("span",{className:"icon is-small is-right"},l.a.createElement(y.a,{icon:"exclamation-triangle"}))),l.a.createElement("p",{className:"help is-danger"},"This email is invalid")),l.a.createElement("div",{className:"field"},l.a.createElement("div",{className:"control"},l.a.createElement("label",{className:"checkbox"},l.a.createElement("input",{type:"checkbox"}),"\u8bb0\u4f4f\u6211"))),l.a.createElement("div",{className:"field"},l.a.createElement("div",{className:"control"},l.a.createElement("input",{type:"submit",className:"button is-success is-fullwidth",value:"\u767b\u5f55"})))))))))}}]),t}(n.Component),W=function(){function e(){Object(r.a)(this,e),this.allCookies=e.cookies(),this.allKeys=this.keys()}return Object(c.a)(e,[{key:"keys",value:function(){var e=[];if(null===this.allCookies)return[];for(var t in this.allCookies)this.allCookies.hasOwnProperty(t)&&e.push(t);return e}},{key:"key",value:function(e){return e<0||e>=this.allKeys.length?null:this.allKeys[e]}},{key:"set",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2592e3,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"/";e in this.allCookies||this.allKeys.push(e),this.allCookies[e]=t;var l=e+"="+encodeURIComponent(t);"number"===typeof a&&(l+="; max-age="+a),n&&(l+="; path="+n),document.cookie=l}},{key:"get",value:function(e){return this.allCookies[e]||null}},{key:"delete",value:function(e){e in this.allCookies&&(delete this.allCookies[e],this.allKeys=this.allKeys.map(function(t){if(t!==e)return t}),document.cookie=e+"=; max-age=0")}},{key:"clear",value:function(){if(0===this.allCookies.length){for(var e in this.allCookies)document.cookie=e+"=; max-age=0";this.allCookies={},this.allKeys=[]}}}],[{key:"cookies",value:function(){var e={},t=document.cookie;if(""===t||null===t)return e;for(var a=t.split("; "),n=0;n<a.length;n++){var l=a[n],s=l.indexOf("="),i=l.substring(0,s),r=l.substring(s+1);e[i]=r}return e}}]),e}();Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var F=a(10),B=a(8);F.b.add(B.a,B.b,B.c,B.d,B.e,B.f,B.g,B.h,B.i,B.j);i.a.render((new W).get("username")?l.a.createElement(U,null):l.a.createElement(P,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[15,2,1]]]);
//# sourceMappingURL=main.8e5eba76.chunk.js.map